# Week 12
## 内容
- デモ
    - TEXTポストの文字色、タイトルの漏れ、WebViewの横スクロール禁止
    - 自分のポストを除外する設定を追加
    - 写真ポストを除外する設定を追加
    - 写真の画質設定を追加
    - LikeとReblogのtoastのレイアウトや位置を変更
- 修正内容
    - TEXTポストの文字色が見にくかった問題を修正
    - TEXTポストのタイトルが表示されていなかった問題を修正
    - ポストによってはWebViewが横スクロールしていた問題を修正
    - 自分のポストを除外する設定を追加
    - 写真ポストを除外する設定を追加
    - 写真の画質設定を追加
    - デフォルト言語を英語に変更
    - WebView内のリンクをタップしたときに、外部ブラウザを開くよう修正
    - LikeとReblogのtoastのレイアウトや位置を変更
- 問題点
    - たまにポストに抜けがある
    - 横画面にしたときなど、設定画面に対して高さが足りないとき、タンパカの頭が切れる
- その他
    - ストアのリソースを作成
        - 説明、アイコン、スクリーンショット、バナー
  

## デモ
- デモします

## 修正内容の説明
### TEXTポストの文字色が見にくかった問題を修正
- 前回行った、暗い背景色に対してWebViewの文字を見やすくするためのcssロードが他のポストで漏れてた

### TEXTポストのタイトルが表示されていなかった問題を修正
- タイトルを表示するのを忘れてたので表示

### ポストによってはWebViewが横スクロールしていた問題を修正
- TEXTポストやQUOTEポストのWebViewに必ず折り返すcssをjavascriptで読み込ませた

### 自分のポストを除外する設定を追加
- 自分のポストがダッシュボードに表示されても邪魔なので、非表示設定を追加
- デフォルトはoff

### 写真ポストを除外する設定を追加
- 公共の場でエロコンテンツが表示される危険性を回避するための必須機能
- デフォルトはoff

### 写真の画質設定を追加
- 高画質な写真を読み込む設定を追加
- デフォルトはoff
- onにすると、画面解像度の幅以上で最小の写真を取得
- offにすると、幅500px以下で最大の画像を取得
- Tumblrでの写真解像度はオリジナル以外に、幅500, 400, 250, 100, 75pxの縮小画像が用意される
    - ただし、オリジナルが500px未満のときは、オリジナルとそれ以下の縮小画像になる
    - 例えば幅350pxの画像の場合、用意されるのは350 (オリジナル), 250, 100, 75の4種類になる
- 設定項目が増えたため、横画面などでビュー高さが足りなくなるため、設定画面をスクロールビューにした

### デフォルト言語を英語に変更
- 日本以外でもリリースするので、デフォルト言語を英語に変えた
- 日本語リソースをvalues-jaに移して、英語リソースをvaluesに移動

### WebView内のリンクをタップしたときに、外部ブラウザを開くよう修正
- WebView内のリンクをタップしたときに、そのWebView内で遷移していたため見づらかった
- WebViewClientのshouldOverrideUrlLoading()をオーバーライドしたらできた
    - http://stackoverflow.com/questions/4229494/webview-link-click-open-default-browser

### LikeとReblogのtoastのレイアウトや位置を変更
- LikeとReblogの開始に対するtoastも表示
- レイアウトを小さめにして、右上に表示
- ほんとは複数のtoastが表示されるときは、重ならないように表示したかったけど、途中まで実装して、めんどくさそうだったので、やめた
- likeとreblog以外のtoastは今まで通り

## 問題点
### たまにポストに抜けがある
- 原因は特定できていない
- since_idによるダッシュボード取得のバグっぽい
- since_idの指定の仕方とか、重複分を削るところとかで、端っこのポストが抜けてる感じ

### 横画面にしたときなど、設定画面に対して高さが足りないとき、タンパカの頭が切れる
- すぐ直りそうだけど調べるのがめんどくさくい、かつどうでもいい問題なので放置